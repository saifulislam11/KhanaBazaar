---------------- ALL necessary triggers --------


CREATE OR REPLACE TRIGGER CUSTOMER_PHONE_LIMIT_EXCEEDS
    BEFORE INSERT
    ON CUSTOMER_PHONE
    FOR EACH ROW
DECLARE
    ID      CHAR(10);
    COUNTER NUMBER;
BEGIN
    ID := :NEW.CUSTOMER_ID;
    SELECT COUNT(*) INTO ID FROM CUSTOMER_PHONE WHERE CUSTOMER_ID = ID;
    IF COUNTER > 2 THEN
        FOR RECORD IN (SELECT * FROM CUSTOMER_PHONE WHERE CUSTOMER_ID = ID )
            LOOP
                DELETE FROM CUSTOMER_PHONE WHERE CUSTOMER_ID = ID AND PHONE_NO = RECORD.PHONE_NO;
                EXIT;
            end loop;
    end if;
END;
/